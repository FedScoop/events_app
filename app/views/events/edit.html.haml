- counter = 0
%h1= "Edit " + @event.name
%br
%br
= form_for @event, html: { class: "edit-event-form" } do |f|
  %b Name:
  = f.text_field :name
  %br
  %b Date & Time:
  = f.datetime_select :date
  %br
  %b Location:
  = f.collection_select :venue, Venue.order(:name),:id,:name, selected: @event.venue.id
  Need to add a new venue? Do so <a href="#{new_venue_path}" target="_blank">here</a> first.
  %br
  %b Speakers:
  %br
  .speakers-select
    - num = Speaker.count
    - slice_num = (num / 3) + (num % 3)
    - Speaker.order(:last_name).each_slice(slice_num) do |slice|
      .speaker-column
        = f.collection_check_boxes(:speaker_ids, slice, :id, :name) do |b|
          .checkbox= b.label { b.check_box + " " + b.text }
  %div{ style: "clear:both;" }
  %br
  %b Should this event show up on the site?
  = f.check_box :live
  %br
  %b URL for event website:
  = f.text_field :site_url
  %br
  .add-agenda
    %b Agenda:
    %br
    %a.add-agenda-item Add timeslot
    %br
    - if @event.agenda
      - @event.agenda.each do |item|
        = render partial: "agenda_form", locals: { event: @event, item: item, counter: counter }
        - counter += 1
    - else
      = render partial: "agenda_form", locals: { event: @event, item: nil, counter: counter }
      - counter += 1
  = f.submit
.new-agenda-item{ style: "display:none;" }
  = render partial: "agenda_form", locals: { event: @event, item: nil, counter: counter }
.counter{ style: "display:none;" }
  = counter
